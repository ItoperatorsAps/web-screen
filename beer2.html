<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Fredags√∏l - Friday Beer Countdown</title>
	<style>
		/* Using next/font is recommended for better performance and privacy in Next.js [^2][^3]. */
		/* External CSS imports like this can be render-blocking [^1]. */
		@import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Roboto:wght@300;400;700&display=swap');

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		body {
			height: 100vh;
			width: 100vw;
			overflow: hidden;
			background: linear-gradient(45deg, #ff6b35, #f7931e, #ffd23f, #06ffa5, #1fb3d3, #5d4e75);
			background-size: 400% 400%;
			animation: gradientShift 8s ease infinite;
			font-family: 'Roboto', sans-serif;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			position: relative;
		}
		@keyframes gradientShift {
			0% { background-position: 0% 50%; }
			50% { background-position: 100% 50%; }
			100% { background-position: 0% 50%; }
		}
		/* Party mode specific background animation: much faster gradient shift */
		body.party-mode {
			animation: gradientShift 1s ease infinite;
		}

		.title {
			font-family: 'Fredoka One', cursive;
			font-size: clamp(3rem, 8vw, 6rem);
			color: #fff;
			text-shadow: 4px 4px 8px rgba(0,0,0,0.3);
			margin-bottom: 2rem;
			animation: bounce 2s ease-in-out infinite;
			text-align: center;
		}
		@keyframes bounce {
			0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
			40% { transform: translateY(-20px); }
			60% { transform: translateY(-10px); }
		}
		/* Party mode specific title animation: more aggressive pulse and glow */
		body.party-mode .title {
			animation: superPulse 0.8s ease-in-out infinite,
			textGlow 1.5s ease-in-out infinite alternate;
		}
		@keyframes superPulse {
			0%, 100% { transform: scale(1); }
			50% { transform: scale(1.1); }
		}
		@keyframes textGlow {
			0% { text-shadow: 0 0 10px #fff, 0 0 20px #ffd23f, 0 0 30px #ff6b35; }
			100% { text-shadow: 0 0 20px #fff, 0 0 40px #06ffa5, 0 0 60px #1fb3d3; }
		}

		.countdown-container {
			display: flex;
			gap: 2rem;
			margin-bottom: 3rem;
			flex-wrap: wrap;
			justify-content: center;
		}
		.time-unit {
			background: rgba(255, 255, 255, 0.2);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 2rem 1.5rem;
			text-align: center;
			border: 2px solid rgba(255, 255, 255, 0.3);
			box-shadow: 0 8px 32px rgba(0,0,0,0.1);
			animation: float 3s ease-in-out infinite;
			min-width: 120px;
		}
		.time-unit:nth-child(2) { animation-delay: -0.5s; }
		.time-unit:nth-child(3) { animation-delay: -1s; }
		.time-unit:nth-child(4) { animation-delay: -1.5s; }
		@keyframes float {
			0%, 100% { transform: translateY(0px); }
			50% { transform: translateY(-10px); }
		}
		.time-number {
			font-size: clamp(2.5rem, 6vw, 4rem);
			font-weight: 700;
			color: #fff;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
			display: block;
			line-height: 1;
		}
		.time-label {
			font-size: clamp(0.8rem, 2vw, 1.2rem);
			color: rgba(255, 255, 255, 0.9);
			text-transform: uppercase;
			letter-spacing: 1px;
			margin-top: 0.5rem;
		}
		.beer-container {
			position: absolute;
			width: 100%;
			height: 100%;
			pointer-events: none;
			overflow: hidden;
		}
		.beer {
			position: absolute;
			font-size: 3rem;
			animation: beerFloat 6s ease-in-out infinite;
		}
		.beer:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; }
		.beer:nth-child(2) { right: 15%; top: 30%; animation-delay: -2s; }
		.beer:nth-child(3) { left: 5%; bottom: 25%; animation-delay: -4s; }
		.beer:nth-child(4) { right: 10%; bottom: 35%; animation-delay: -1s; }
		.beer:nth-child(5) { left: 50%; top: 10%; animation-delay: -3s; }
		.beer:nth-child(6) { right: 45%; bottom: 15%; animation-delay: -5s; }
		@keyframes beerFloat {
			0%, 100% { transform: translateY(0px) rotate(0deg); }
			25% { transform: translateY(-20px) rotate(5deg); }
			50% { transform: translateY(-10px) rotate(-5deg); }
			75% { transform: translateY(-15px) rotate(3deg); }
		}
		/* Party mode specific beer animation: faster and more dynamic */
		body.party-mode .beer {
			animation: beerFloatParty 1.5s ease-in-out infinite !important;
			font-size: 5rem; /* Larger beers in party mode */
		}
		@keyframes beerFloatParty {
			0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
			25% { transform: translateY(-50px) rotate(30deg) scale(1.2); }
			50% { transform: translateY(-25px) rotate(-30deg) scale(1); }
			75% { transform: translateY(-40px) rotate(20deg) scale(1.1); }
		}

		.bubbles {
			position: absolute;
			width: 100%;
			height: 100%;
			overflow: hidden;
			pointer-events: none;
		}
		.bubble {
			position: absolute;
			background: rgba(255, 255, 255, 0.6);
			border-radius: 50%;
			animation: bubbleRise 4s linear infinite;
		}
		@keyframes bubbleRise {
			0% {
				bottom: -100px;
				opacity: 0;
				transform: scale(0);
			}
			10% {
				opacity: 1;
				transform: scale(1);
			}
			90% {
				opacity: 1;
			}
			100% {
				bottom: 100vh;
				opacity: 0;
				transform: scale(0);
			}
		}
		.celebration {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			z-index: 1000;
		}
		.confetti {
			position: absolute;
			background: #ff6b35; /* Default color, will be overridden by JS */
			animation: confettiFall 3s linear forwards;
			opacity: 0; /* Start hidden, JS will make it visible */
		}
		@keyframes confettiFall {
			0% {
				transform: translateY(-100vh) rotate(0deg);
				opacity: 1;
			}
			100% {
				transform: translateY(100vh) rotate(360deg);
				opacity: 0;
			}
		}
		.message {
			font-family: 'Fredoka One', cursive;
			font-size: clamp(1.5rem, 4vw, 2.5rem);
			color: #fff;
			text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
			text-align: center;
			animation: pulse 2s ease-in-out infinite;
		}
		@keyframes pulse {
			0%, 100% { transform: scale(1); }
			50% { transform: scale(1.05); }
		}
		/* Party mode specific message animation: more aggressive pulse and glow */
		body.party-mode .message {
			animation: superPulse 0.8s ease-in-out infinite,
			textGlow 1.5s ease-in-out infinite alternate;
		}

		.beer-mug {
			font-size: 4rem;
			animation: cheers 2s ease-in-out infinite;
			margin: 0 1rem;
		}
		@keyframes cheers {
			0%, 100% { transform: rotate(0deg); }
			25% { transform: rotate(-10deg); }
			75% { transform: rotate(10deg); }
		}
		/* Party mode specific beer mug animation: more aggressive cheers */
		body.party-mode .beer-mug {
			animation: cheersParty 1s ease-in-out infinite;
			font-size: 6rem; /* Larger mugs in party mode */
		}
		@keyframes cheersParty {
			0%, 100% { transform: rotate(0deg) scale(1); }
			25% { transform: rotate(-20deg) scale(1.1); }
			75% { transform: rotate(20deg) scale(1.1); }
		}

		@media (max-width: 768px) {
			.countdown-container {
				gap: 1rem;
			}
			.time-unit {
				padding: 1.5rem 1rem;
				min-width: 100px;
			}
			.beer {
				font-size: 2rem;
			}
		}
	</style>
</head>
<body>
<div class="beer-container">
	<div class="beer">üç∫</div>
	<div class="beer">üçª</div>
	<div class="beer">üç∫</div>
	<div class="beer">üçª</div>
	<div class="beer">üç∫</div>
	<div class="beer">üçª</div>
</div>
<div class="bubbles" id="bubbles"></div>
<h1 class="title">FREDAGS√òL</h1>
<div class="countdown-container" id="countdown">
	<div class="time-unit">
		<span class="time-number" id="days">0</span>
		<span class="time-label">Dage</span>
	</div>
	<div class="time-unit">
		<span class="time-number" id="hours">0</span>
		<span class="time-label">Timer</span>
	</div>
	<div class="time-unit">
		<span class="time-number" id="minutes">0</span>
		<span class="time-label">Minutter</span>
	</div>
	<div class="time-unit">
		<span class="time-number" id="seconds">0</span>
		<span class="time-label">Sekunder</span>
	</div>
</div>
<div class="message" id="message">
	<span class="beer-mug">üç∫</span>
	Tid til fredags√∏l!
	<span class="beer-mug">üç∫</span>
</div>
<div class="celebration" id="celebration"></div>
<script>
	let partyModeActive = false;
	let partyModeEndTime = null;
	let confettiGenerationInterval = null;
	let confettiStopTimeout = null;
	let bubbleGenerationInterval = null;
	let currentCountdownTarget = null; // Stores the current target date for the countdown

	/**
	 * Starts generating confetti particles.
	 * Confetti will be generated continuously until stopConfetti() is called.
	 */
	function startConfetti() {
		const celebration = document.getElementById('celebration');
		const colors = ['#ff6b35', '#f7931e', '#ffd23f', '#06ffa5', '#1fb3d3', '#5d4e75'];

		// Clear any existing confetti before starting new ones
		celebration.innerHTML = '';

		confettiGenerationInterval = setInterval(() => {
			const confetti = document.createElement('div');
			confetti.className = 'confetti';
			confetti.style.left = Math.random() * 100 + '%';
			confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
			confetti.style.width = confetti.style.height = Math.random() * 15 + 10 + 'px'; // Larger size range
			confetti.style.animationDuration = Math.random() * 1.5 + 1.5 + 's'; // Faster fall
			confetti.style.animationDelay = Math.random() * 0.3 + 's'; // Smaller delay variation

			celebration.appendChild(confetti);

			// Remove confetti after its animation is likely finished to prevent DOM bloat
			setTimeout(() => {
				confetti.remove();
			}, (parseFloat(confetti.style.animationDuration) + parseFloat(confetti.style.animationDelay)) * 1000 + 100);
		}, 50); // Generate a new confetti piece every 50ms (more frequent)
	}

	/**
	 * Stops confetti generation and clears all existing confetti particles.
	 */
	function stopConfetti() {
		clearInterval(confettiGenerationInterval);
		clearTimeout(confettiStopTimeout); // Clear any pending stop timeout
		document.getElementById('celebration').innerHTML = ''; // Clear all confetti elements
	}

	/**
	 * Starts or adjusts bubble generation based on party mode.
	 * @param {boolean} isPartyMode - True if in party mode, false otherwise.
	 */
	function createBubbles(isPartyMode = false) {
		const bubblesContainer = document.getElementById('bubbles');
		// Clear existing interval if any to prevent multiple intervals running
		if (bubbleGenerationInterval) {
			clearInterval(bubbleGenerationInterval);
		}

		const intervalTime = isPartyMode ? 50 : 300; // Much faster generation in party mode
		const minSize = isPartyMode ? 30 : 10; // Larger bubbles in party mode
		const maxSize = isPartyMode ? 60 : 20;
		const minAnimDuration = isPartyMode ? 1.5 : 3; // Faster rise in party mode
		const maxAnimDuration = isPartyMode ? 2.5 : 5;

		bubbleGenerationInterval = setInterval(() => {
			const bubble = document.createElement('div');
			bubble.className = 'bubble';
			bubble.style.left = Math.random() * 100 + '%';
			bubble.style.width = bubble.style.height = Math.random() * (maxSize - minSize) + minSize + 'px';
			bubble.style.animationDuration = Math.random() * (maxAnimDuration - minAnimDuration) + minAnimDuration + 's';
			bubble.style.animationDelay = Math.random() * 1 + 's'; // Slightly less delay variation
			bubblesContainer.appendChild(bubble);
			setTimeout(() => {
				bubble.remove();
			}, (parseFloat(bubble.style.animationDuration) + parseFloat(bubble.style.animationDelay)) * 1000 + 100);
		}, intervalTime);
	}

	/**
	 * Activates party mode: changes background animation, message, starts confetti and faster bubbles.
	 */
	function startPartyMode() {
		document.body.classList.add('party-mode');
		document.getElementById('message').innerHTML = `
                <span class="beer-mug">üçª</span>
                NU M√Ö MAN DRIKKE √òL! SK√ÖL!
                <span class="beer-mug">üçª</span>
            `;
		startConfetti();
		confettiStopTimeout = setTimeout(stopConfetti, 30 * 1000); // Stop confetti after 30 seconds
		createBubbles(true); // Start faster, larger bubbles
	}

	/**
	 * Deactivates party mode: reverts background, message, stops confetti and normalizes bubbles.
	 */
	function endPartyMode() {
		document.body.classList.remove('party-mode');
		document.getElementById('message').innerHTML = `
                <span class="beer-mug">üç∫</span>
                Tid til fredags√∏l!
                <span class="beer-mug">üç∫</span>
            `;
		stopConfetti();
		partyModeActive = false;
		partyModeEndTime = null;
		createBubbles(false); // Revert to normal bubble generation
		// After party mode ends, calculate the next target (which will be next Friday 2 PM)
		currentCountdownTarget = calculateNextFriday2PM(true);
		updateCountdown(); // Update display immediately
	}

	/**
	 * Calculates the next Friday at 2 PM.
	 * If `skipCurrentFriday` is true, it calculates the Friday after the current one.
	 * @param {boolean} skipCurrentFriday - If true, calculates target for the Friday after the current one.
	 * @returns {Date} The Date object for the next Friday at 2 PM.
	 */
	function calculateNextFriday2PM(skipCurrentFriday = false) {
		const now = new Date();
		const target = new Date(now);
		target.setHours(14, 0, 0, 0); // Set target time to 2 PM

		const currentDay = now.getDay(); // 0 = Sunday, 5 = Friday

		if (skipCurrentFriday) {
			// If we need to skip the current Friday (e.g., after 4 PM on Friday)
			let daysToAdd = (5 - currentDay + 7) % 7;
			if (currentDay === 5) { // If it's Friday, add 7 days to get to next Friday
				daysToAdd = 7;
			}
			target.setDate(now.getDate() + daysToAdd);
		} else {
			// Normal calculation: if it's Friday and past 2 PM, go to next Friday
			if (currentDay === 5 && now.getHours() >= 14) {
				target.setDate(now.getDate() + 7);
			} else {
				// If it's not Friday, or Friday before 2 PM, target this Friday
				let daysToAdd = (5 - currentDay + 7) % 7;
				target.setDate(now.getDate() + daysToAdd);
			}
		}
		return target;
	}

	/**
	 * Updates the countdown display every second.
	 * Manages transitions between countdown mode and party mode.
	 */
	function updateCountdown() {
		const now = new Date();

		// If party mode is active, check if it's over
		if (partyModeActive) {
			if (now >= partyModeEndTime) {
				endPartyMode(); // Party mode is over, revert to countdown
			} else {
				// Still in party mode, no need to update countdown numbers
				return;
			}
		}

		// Use the fixed currentCountdownTarget
		let timeDiff = currentCountdownTarget - now;

		if (timeDiff <= 0) {
			// Countdown has reached zero or passed
			if (!partyModeActive) { // Only start party mode if not already active
				partyModeActive = true;
				// Party mode lasts until 4 PM on the current Friday
				partyModeEndTime = new Date(now);
				partyModeEndTime.setHours(16, 0, 0, 0);

				// If current time is already past 4 PM, set partyModeEndTime to now + a small buffer
				// to immediately trigger endPartyMode and calculate next Friday.
				if (now.getHours() >= 16) {
					partyModeEndTime = new Date(now.getTime() + 1000); // 1 second buffer
				}

				startPartyMode();
			}
		} else {
			// Countdown is running, display time remaining
			const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
			const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
			const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
			const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

			document.getElementById('days').textContent = days.toString().padStart(2, '0');
			document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
			document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
			document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

			// Ensure message is reset if it was in party mode previously and now countdown is active
			if (document.getElementById('message').innerHTML.includes('SK√ÖL')) {
				document.getElementById('message').innerHTML = `
                        <span class="beer-mug">üç∫</span>
                        Tid til fredags√∏l!
                        <span class="beer-mug">üç∫</span>
                    `;
			}
		}
	}

	// --- Initial setup on page load ---
	const now = new Date();
	const currentDay = now.getDay(); // 0 = Sunday, 5 = Friday
	const currentHour = now.getHours();

	// Check if it's currently Friday between 2 PM and 4 PM
	if (currentDay === 5 && currentHour >= 14 && currentHour < 16) {
		partyModeActive = true;
		partyModeEndTime = new Date(now);
		partyModeEndTime.setHours(16, 0, 0, 0); // Party ends at 4 PM
		startPartyMode(); // Immediately activate party mode visuals
		// Set the next countdown target to the *next* Friday 2 PM
		currentCountdownTarget = calculateNextFriday2PM(true);
	} else {
		// Normal countdown scenario
		partyModeActive = false;
		currentCountdownTarget = calculateNextFriday2PM(false); // Calculate initial target
		createBubbles(false); // Start with normal bubble generation
		updateCountdown(); // Initial countdown display
	}

	// Start the interval for updating the countdown/party mode
	setInterval(updateCountdown, 1000);

	// Removed the click event listener as interaction is unnecessary for an info screen.
</script>
</body>
</html>